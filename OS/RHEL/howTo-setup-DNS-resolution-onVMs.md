We need to understand couple of items before deciding how to refer to DNS Server.

1. Is the VM loading it's network configurations from remote DHCP server?
    1. If yes, then write a dhclient.conf in /etc/dhcp folder. Refer to solution 1
2. Is network manager service active and loading the network parameters? 
    1. If yes DNS entry can be made to network script var file. See solution 2
3. Is resolve.conf is manually editted or it's pointing to dnsmasq service?


### Solution - 1
1. Create the conf file.
```sh
# below will add search domain and DNS server on the top. They will be written before the data retrieved from DHCP Server.
cat dhclient.conf
interface "eth0" {
	supersede domain-search "c1-ocp.morpheus.com" , "openstacklocal";
	prepend domain-name-servers 10.74.178.230;
}
```
Another sample is:

```sh
# This is an extremely configured file. Normally org doesn't need this much
timeout 60;
retry 60;
reboot 10;
select-timeout 5;
initial-interval 2;
reject 192.33.137.209;

interface "ep0" {
    send host-name "andare.fugue.com";
    hardware ethernet 00:a0:24:ab:fb:9c;
    send dhcp-client-identifier 1:0:a0:24:ab:fb:9c;
    send dhcp-lease-time 3600;
    supersede domain-search "fugue.com", "rc.vix.com", "home.vix.com";
    prepend domain-name-servers 127.0.0.1;
    request subnet-mask, broadcast-address, time-offset, routers,
        domain-search, domain-name, domain-name-servers, host-name;
    require subnet-mask, domain-name-servers;
    script "/usr/sbin/dhclient-script";
    media "media 10baseT/UTP", "media 10base2/BNC";
}

alias {
    interface "ep0";
    fixed-address 192.5.5.213;
    option subnet-mask 255.255.255.255;
}
```
2. restart the network manager service.

```sh
systemctl restart NetworkManager.service
```

### Solution - 2
1. edit /etc/sysconfig/network-scripts/ifcfg-eth0 and add
```sh
DNS1=10.74.178.230
```
2. restart the network manager


there are two methods.
### update resolv.conf in below fashion
I create DNS server using bind on 10.74.178.185 to resolve c1-ocp.morpheus.com domain. Idea is to add the new local domain authority server first. No domain key word used and a single search key work. search keyword can take upto default of 6.

``` sh
[root@node-9 ~]# cat /etc/resolv.conf
# Generated by NetworkManager
search c1-ocp.morpheus.com openstacklocal rajranja.lab.pnq2.cee.redhat.com
nameserver 10.74.178.185
nameserver 10.75.5.25
nameserver 10.38.5.26
```
if network manager is over writing the resolv.conf then DNS entry from /etc/sysconfig/network-scripts/ifcfg* needs to be disabled.

``` sh
grep -i "dns" /etc/sysconfig/network-scripts/ifcfg*
```

```sh
# vi /etc/NetworkManager/NetworkManager.conf
 [main]
 dns=none
```

or disable the network manager

``` sh
systemctl disable NetworkManager.service
systemctl stop NetworkManager.service
```

### install dnsmasq
